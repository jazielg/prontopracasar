<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Participe do nosso questionário para casais e descubra suas afinidades no dia a dia. Divirta-se e entenda melhor sua rotina e estilo de vida em casal!" />
    <meta name="keywords" content="questionário para casais, quiz sobre rotina, estilo de vida, compatibilidade, relacionamento" />
    <meta property="og:title" content="Questionário para Casais - Descubra Suas Afinidades" />
    <meta property="og:description" content="Participe do nosso questionário para casais e descubra suas afinidades no dia a dia. Divirta-se e entenda melhor sua rotina e estilo de vida." />
    <meta property="og:image" content="./ppc.png" />
    <meta property="og:type" content="website" />
    <title>Questionário para Casais - Descubra Suas Afinidades</title>

    <style>
      * {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: #101728;
        color: #f1f1f1;
        line-height: 24px;
      }

      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }

      label {
        display: block;
      }

      .title {
        text-align: center;
        margin-bottom: 20px;
      }

      .theme-color {
        color: #e62657;
      }

      .question {
        margin-bottom: 20px;
        font-weight: bold;
      }

      .question p {
        margin-bottom: 10px;
        font-size: 1.2em;
      }

      .btn {
        display: block;
        margin: 0 auto;
        padding: 10px 20px;
        background: #e62657;
        color: #fff;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        text-transform: uppercase;
        font-weight: bold;
      }

      .btn:hover {
        filter: brightness(0.9);
      }

      img {
        display: block;
        margin: 0 auto;
        max-width: 100%;
      }

      .img-50 {
        width: 30%;
        max-width: 300px;
      }

      .names {
        display: flex;
        justify-content: space-around;
        text-align: center;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .names div {
        flex: 1 1 45%;
      }

      .names input {
        text-align: center;
        background-color: #e62657;
        border: 0;
        padding: 10px;
        border-radius: 20px;
        font-weight: bold;
        text-transform: uppercase;
        color: white;
        font-size: 0.8em;
        width: 100%;
      }

      form h3 {
        margin: 20px 0;
      }

      #section2, #section3, #section4 {
        display: none;
      }

      #name-first, #name-second {
        text-align: center;
        font-weight: bold;
        margin-bottom: 20px;
        text-transform: uppercase;
        font-size: 24px;
      }

      table {
        margin: 10px 0px;
      }

      table, th, td {
        border: 1px solid #e62657;
        border-collapse: collapse;
        padding: 5px;
      }

      table thead {
        background:  #e62657;
      }

      table img {
        width: 30px;
      }
    </style>
  </head>
  <body>
    <header>
      <a href="./index.html">
        <img src="./ppc.png" alt="Logo ProntoPraCasar - Questionário para casais" class="img-50" />
      </a>
      <h1 class="title theme-color">ProntoPraCasar</h1>
    </header>

    <main class="container">
      <section id="section1">
        <form id="getNamesForm" method="post">
          <h2 class="title">Nomes do Casal:</h2>
          <div class="names">
            <div>
              <label for="first">1°</label>
              <input type="text" id="first" name="first" required />
            </div>
            <div>
              <label for="second">2°</label>
              <input type="text" id="second" name="second" required />
            </div>
          </div>
          <button type="submit" class="btn">Iniciar</button>
        </form>
      </section>

      <section id="section2">
        <p id="name-first"></p>
        <form id="firstForm" method="post">
          <h3 class="theme-color">Rotina e estilo de vida</h3>
          <div class="question">
            <p>1. Você prefere começar o dia cedo ou tarde?</p>
            <div class="options">
              <label>
                <input type="radio" name="q1" value="1" required /> Cedo, gosto de rotina matinal
              </label>
              <label>
                <input type="radio" name="q1" value="2" required /> Tarde, gosto de dormir mais um pouco
              </label>
            </div>
          </div>

          <div class="question">
            <p>2. Você é mais de acordar com um despertador ou acordar naturalmente?</p>
            <div class="options">
              <label>
                <input type="radio" name="q2" value="1" required /> Com despertador
              </label>
              <label>
                <input type="radio" name="q2" value="2" required /> Naturalmente
              </label>
            </div>
          </div>

          <button type="submit" class="btn">Próximo</button>
        </form>
      </section>

      <section id="section3">
        <p id="name-second"></p>
        <form id="secondForm" method="post">
          <div class="question">
            <p>1. Você prefere começar o dia cedo ou tarde?</p>
            <div class="options">
              <label>
                <input type="radio" name="q1" value="1" required /> Cedo, gosto de rotina matinal
              </label>
              <label>
                <input type="radio" name="q1" value="2" required /> Tarde, gosto de dormir mais um pouco
              </label>
            </div>
          </div>

          <div class="question">
            <p>2. Você é mais de acordar com um despertador ou acordar naturalmente?</p>
            <div class="options">
              <label>
                <input type="radio" name="q2" value="1" required /> Com despertador
              </label>
              <label>
                <input type="radio" name="q2" value="2" required /> Naturalmente
              </label>
            </div>
          </div>

          <button type="submit" class="btn">Ver Resultados</button>
        </form>
      </section>

      <section id="section4">
        <h2 class="theme-color">Resultados</h2>
        <table>
          <thead>
            <tr>
              <th>Perguntas</th>
              <th>Match</th>
            </tr>
          </thead>
          <tbody id="results-body">
          </tbody>
        </table>
        <button class="btn" id="restart">Reiniciar</button>
      </section>
    </main>

    <script>
      window.onload = function () {

        const questions = {
          "q1": "Você prefere começar o dia cedo ou tarde?",
          "q2": "Você é mais de acordar com um despertador ou acordar naturalmente?"
        }

        const section1 = document.querySelector("#section1");
        const section2 = document.querySelector("#section2");
        const section3 = document.querySelector("#section3");
        const section4 = document.querySelector("#section4");

        let results = {};

        document.querySelector("#getNamesForm").addEventListener("submit", function (event) {
          event.preventDefault();
  
          localStorage.setItem("name-first", document.querySelector("#first").value);
          localStorage.setItem("name-second", document.querySelector("#second").value);

          setName();

          section1.style.display = "none";
          section2.style.display = "block";

          localStorage.setItem("section", 1);
        });
  
        document.querySelector("#firstForm").addEventListener("submit", function (event) {
          event.preventDefault();
          submitQuiz('firstForm');

          section2.style.display = "none";
          section3.style.display = "block";

          localStorage.setItem("section", 2);
        });

        document.querySelector("#secondForm").addEventListener("submit", function (event) {
          event.preventDefault();
          submitQuiz('secondForm');

          setResults();

          localStorage.setItem("section", 3);
        });

        document.querySelector("#restart").addEventListener("click", function () {
          localStorage.clear();
          location.reload();
        });

        function submitQuiz(idForm) {
          const form = document.getElementById(idForm);
          const formData = new FormData(form);
          let responses = {};

          formData.forEach((value, key) => {
            responses[key] = value;
          });

          localStorage.setItem(idForm, JSON.stringify(responses));
        }

        function setName() {
          document.querySelector("#name-first").textContent = '1° ' + localStorage.getItem("name-first");
          document.querySelector("#name-second").textContent = '2° ' + localStorage.getItem("name-second");
        }

        function init() {
          if (localStorage.getItem("section") == '1') {
            section1.style.display = "none";
            section2.style.display = "block";
          }

          if (localStorage.getItem("section") == '2') {
            section1.style.display = "none";
            section2.style.display = "none";
            section3.style.display = "block";
          }

           if (localStorage.getItem("section") == '3') {
            section1.style.display = "none";
            section2.style.display = "none";
            section3.style.display = "none";
            section4.style.display = "block";

            setResults();
          }

          setName();
        }

        function setResults() {
          let form1 = JSON.parse(localStorage.getItem("firstForm"));
          let form2 = JSON.parse(localStorage.getItem("secondForm"));

          let differences = 0;

          for (let key in form1) {
            if (form1[key] !== form2[key]) {
              differences++;
              results[key] = 0;
            } else {
              results[key] = 1;
            }
          }

          populateResultsTable();

          section3.style.display = "none";
          section4.style.display = "block";
          // localStorage.clear();
        }

        function populateResultsTable() {
          let tableContent = '';
          for (let item in results) {
            icon = results[item] == 0 ? 'error' : 'success';
            tableContent += `
              <tr>
                <td>${questions[item]}</td>
                <td><img src="./images/${icon}.svg"></td>
              </tr>
            `;
          }

          document.querySelector("#results-body").innerHTML = tableContent;
        }

        init();
      }
    </script>
  </body>
</html>
